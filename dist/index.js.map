{"version":3,"file":"index.js","sources":["../src/components/tiles/styles.ts","../src/constants/tiles.ts","../src/components/tiles/index.tsx","../src/components/scenarios/styles.ts","../src/components/tooltip/index.tsx","../src/utils/scenarios.ts","../src/components/scenarios/index.tsx","../src/index.tsx"],"sourcesContent":["import { CSSProperties } from 'react';\n\nexport const Styles: { [k: string]: CSSProperties } = {\n  container: {\n    borderRadius: 6,\n    cursor: 'pointer'\n  }\n};\n","export const TILES_WIDTH = 50;\nexport const TILES_HEIGHT = 50;\nexport const TILES_SPACE = 6;\nexport const BG_HIGHLIGHTED = '#414ba5';\nexport const BG_HIGHLIGHTER = 'white';\n","import * as React from 'react';\nimport { Styles } from './styles';\nimport { BG_HIGHLIGHTED, BG_HIGHLIGHTER } from '../../constants/tiles';\n\ninterface TitlesProps {\n  width: number;\n  height: number;\n  margin: number;\n  onClick: () => void;\n  isHighlighted: boolean;\n  disable: boolean;\n  keepHighlighted: boolean;\n}\n\nexport const Tiles = ({\n  height,\n  width,\n  margin,\n  onClick,\n  isHighlighted,\n  disable,\n  keepHighlighted\n}: TitlesProps) => {\n  return (\n    <div\n      role='button'\n      {...{ onClick }}\n      key={new Date().toISOString() + Math.random()}\n      style={{\n        ...Styles.container,\n        width,\n        height,\n        margin,\n        pointerEvents: disable ? 'none' : 'all',\n        background: keepHighlighted ? BG_HIGHLIGHTER : BG_HIGHLIGHTED,\n        animation: 'anim-highlighted',\n        animationDuration: '0.16s',\n        animationDirection: 'alternate',\n        animationPlayState: 'running',\n        animationTimingFunction: 'ease-in-out',\n        animationIterationCount: isHighlighted ? 'infinite' : 0\n      }}\n    />\n  );\n};\n","import { CSSProperties } from 'react';\n\nexport const Styles: { [k: string]: CSSProperties } = {\n  grid: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyItems: 'center'\n  }\n};\n","import * as React from 'react';\nimport styles from './styles.css';\n\ninterface TooltipProps {\n  text: string;\n  left: string;\n  marginTop: string;\n}\n\nexport const Tooltip = ({ text, left, marginTop }: TooltipProps) => {\n  return (\n    <div\n      style={{ left, marginTop, backgroundColor: 'white', textAlign: 'center' }}\n      className={styles.container}\n    >\n      <span className={styles.text}>{text}</span>\n    </div>\n  );\n};\n","import { Positions, Scenarios } from '../types';\n\nexport function calculatorPosition(index: number, col: number) {\n  return {\n    posx: index % col,\n    posy: Math.floor(index / col)\n  };\n}\n\nexport function checkHighlighted(positions: Positions[], pos: Positions) {\n  return (\n    positions &&\n    !!positions.find(({ posx, posy }) => posx === pos.posx && posy === pos.posy)\n  );\n}\n\nexport function getHighlightedTiles({\n  highlightedTiles: numOfTiles,\n  grid\n}: Scenarios) {\n  const [row, col] = grid.split('*').map((n) => +n || 0);\n  const highlightedTiles: Positions[] = [];\n  while (true) {\n    if (highlightedTiles.length === Math.min(numOfTiles, row * col)) {\n      break;\n    }\n    const posx = Math.floor(Math.random() * col);\n    const posy = Math.floor(Math.random() * row);\n    const isExists = highlightedTiles.find(\n      (obj) => obj?.posx === posx && obj?.posy === posy\n    );\n    if (!isExists) {\n      highlightedTiles.push({ posx, posy });\n    }\n  }\n  return highlightedTiles;\n}\n","import React from 'react';\nimport { Tiles } from '../tiles';\nimport {\n  Scenarios as ScenariosType,\n  Positions,\n  Instructions,\n  Status\n} from '../../types';\nimport { TILES_HEIGHT, TILES_WIDTH, TILES_SPACE } from '../../constants/tiles';\nimport { Styles } from './styles';\nimport { Tooltip } from '../tooltip';\nimport { calculatorPosition, checkHighlighted } from '../../utils';\n\ninterface ScenariosProps {\n  onPressTiles?: (positions: Positions) => void;\n  scenario: ScenariosType;\n  highlightedTiles: Positions[];\n  positionsSelected: Positions[];\n  instructions: Instructions;\n  status: Status;\n}\n\nexport const Scenarios = ({\n  scenario: { grid },\n  onPressTiles,\n  instructions,\n  highlightedTiles,\n  status,\n  positionsSelected\n}: ScenariosProps) => {\n  const [row, col] = grid?.split('*').map((n) => +n || 0);\n\n  const handleOnClick = React.useCallback(\n    (position: Positions) => {\n      return () => onPressTiles?.(position);\n    },\n    [onPressTiles]\n  );\n\n  function renderTiles(_: any, index: number) {\n    const position = calculatorPosition(index, col);\n    return (\n      <Tiles\n        width={TILES_WIDTH}\n        height={TILES_HEIGHT}\n        margin={TILES_SPACE / 2}\n        key={`tiles-${index}`}\n        onClick={handleOnClick(position)}\n        disable={!status.isPause}\n        keepHighlighted={checkHighlighted(positionsSelected, position)}\n        isHighlighted={\n          !status.isPause && checkHighlighted(highlightedTiles, position)\n        }\n      />\n    );\n  }\n  const width = col * TILES_WIDTH + TILES_SPACE * col;\n  const height = row * TILES_HEIGHT + TILES_SPACE * col;\n  return (\n    <div\n      style={{\n        ...Styles.grid,\n        width,\n        height\n      }}\n    >\n      {status.showGrid &&\n        Array.apply(null, new Array(row * col)).map(renderTiles)}\n      <Tooltip\n        marginTop={`${height + 16}px`}\n        left='calc(50% - 88px)'\n        text={status.isPre ? instructions?.pre : instructions?.post}\n      />\n    </div>\n  );\n};\n","import React, { useState, useMemo, useEffect } from 'react';\nimport styles from './styles.module.css';\nimport { Scenarios } from './components';\nimport { Configuration, Positions, Status, ResponseScenarios } from './types';\nimport { getHighlightedTiles, checkHighlighted } from './utils';\nimport { BG_HIGHLIGHTED, BG_HIGHLIGHTER } from './constants/tiles';\n\nconst styleSheet = document.styleSheets[0];\nconst styleKeyFrames = `\n    @keyframes anim-highlighted {\n      0%   {background-color:${BG_HIGHLIGHTED};}\n      100% {background-color:${BG_HIGHLIGHTER};}\n    }\n  `;\nstyleSheet.insertRule(styleKeyFrames, styleSheet.cssRules.length);\n\nlet idInterval: NodeJS.Timeout;\nlet idTimeOut: NodeJS.Timeout;\n\nexport interface PsychometricsProps {\n  configuration: Configuration;\n}\n\nconst initStatus = {\n  isPause: false,\n  isPost: false,\n  isPre: true,\n  showGrid: false\n};\n\nexport const Psychometrics = ({\n  configuration: { instructions, scenarios }\n}: PsychometricsProps) => {\n  const [screen, setScreen] = useState(0);\n  const scenario = scenarios[screen];\n  const [displayTime, setDisplayTime] = useState(0);\n  const [status, setStatus] = useState<Status>(initStatus);\n  const [positionsSelected, setPositionSelected] = useState<Positions[]>([]);\n  const res = useMemo<ResponseScenarios>(\n    () => ({\n      highlightedTiles: getHighlightedTiles(scenario),\n      userResponse: []\n    }),\n    [scenario, screen]\n  );\n  const { highlightedTiles, userResponse } = res;\n\n  function handleNextScreen() {\n    console.log(`Screen ${scenario.grid} response:`, {\n      scenario: { highlightedTiles, userResponse }\n    });\n    const max = scenarios.length - 1;\n    const index = Math.min(screen + 1, max);\n    clearInterval(idInterval);\n    if (index !== max) {\n      setScreen(() => index);\n      setStatus((s) => ({ ...s, isPause: false }));\n      setDisplayTime(() => scenario.postDisplayTime / 1000);\n      setPositionSelected(() => []);\n      res.userResponse = [];\n    } else {\n      console.log('Finished psychometrics assessments.');\n    }\n  }\n\n  function onPressTiles(position: Positions) {\n    const isCorrect = checkHighlighted(highlightedTiles, position);\n    if (!isCorrect) {\n      setPositionSelected(() => []);\n      res.userResponse = [];\n      clearTimeout(idTimeOut);\n      setStatus((s) => ({ ...s, isPause: isCorrect }));\n      idTimeOut = setTimeout(\n        () => setStatus((s) => ({ ...s, isPause: !isCorrect })),\n        500\n      );\n    } else {\n      if (\n        !userResponse.find(\n          ({ posx, posy }) => posx === position.posx && posy === position.posy\n        )\n      ) {\n        const positions = [...userResponse, position];\n        setPositionSelected(() => positions);\n        userResponse.push(position);\n        if (highlightedTiles.length === positions.length) {\n          let countCorrect = 0;\n          for (let index = 0; index < positions.length; index++) {\n            if (checkHighlighted(highlightedTiles, positions[index])) {\n              countCorrect += 1;\n            }\n          }\n          if (scenario.highlightedTiles === countCorrect) {\n            handleNextScreen();\n          }\n        }\n      }\n    }\n  }\n\n  useEffect(() => {\n    let time = 0.0;\n    idInterval = setInterval(() => {\n      if (status.isPre) {\n        if (time.toFixed(2) === '0.16') {\n          setStatus((s) => ({ ...s, showGrid: true }));\n        }\n        if (time.toFixed(2) === '0.17') {\n          setStatus((s) => ({\n            ...s,\n            isPost: true\n          }));\n        }\n        if (Math.floor(time) === scenario.preDisplayTime / 1000) {\n          setStatus((s) => ({\n            ...s,\n            isPre: false\n          }));\n        }\n      }\n      if (status.isPost && !status.isPre) {\n        if (time.toFixed(2) === '0.16') {\n          setStatus((s) => ({ ...s, isPause: true }));\n        }\n        const timeFloor = Math.floor(time);\n        const maxTime = scenario.postDisplayTime / 1000;\n        const dips = maxTime - timeFloor;\n        setDisplayTime(() => dips);\n        if (timeFloor === maxTime) {\n          handleNextScreen();\n        }\n      }\n      time += 0.001;\n    }, 0.001);\n    return () => {\n      clearInterval(idInterval);\n    };\n  }, [\n    setStatus,\n    screen,\n    status.isPost,\n    status.isPre,\n    scenario.postDisplayTime,\n    scenario.preDisplayTime\n  ]);\n  return (\n    <div className={styles.container}>\n      <p className={styles.displayTime}>{displayTime}</p>\n      <Scenarios\n        {...{\n          scenario,\n          onPressTiles,\n          highlightedTiles,\n          instructions,\n          status,\n          positionsSelected\n        }}\n      />\n    </div>\n  );\n};\n"],"names":["Styles","container","borderRadius","cursor","TILES_WIDTH","TILES_HEIGHT","TILES_SPACE","BG_HIGHLIGHTED","BG_HIGHLIGHTER","Tiles","height","width","margin","onClick","isHighlighted","disable","keepHighlighted","React","role","key","Date","toISOString","Math","random","style","pointerEvents","background","animation","animationDuration","animationDirection","animationPlayState","animationTimingFunction","animationIterationCount","grid","display","flexWrap","justifyItems","Tooltip","text","left","marginTop","backgroundColor","textAlign","className","styles","calculatorPosition","index","col","posx","posy","floor","checkHighlighted","positions","pos","find","getHighlightedTiles","numOfTiles","highlightedTiles","split","map","n","row","length","min","isExists","obj","push","Scenarios","scenario","onPressTiles","instructions","status","positionsSelected","handleOnClick","useCallback","position","renderTiles","_","isPause","showGrid","Array","apply","isPre","pre","post","styleSheet","document","styleSheets","styleKeyFrames","insertRule","cssRules","idInterval","idTimeOut","initStatus","isPost","Psychometrics","configuration","scenarios","useState","screen","setScreen","displayTime","setDisplayTime","setStatus","setPositionSelected","res","useMemo","userResponse","handleNextScreen","console","log","max","clearInterval","s","postDisplayTime","isCorrect","clearTimeout","setTimeout","countCorrect","useEffect","time","setInterval","toFixed","preDisplayTime","timeFloor","maxTime","dips"],"mappings":"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"}